# æŠ€æœ¯æ¶æ„æ–‡æ¡£

## ğŸ—ï¸ æ•´ä½“æ¶æ„

### åˆ†å±‚è®¾è®¡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     åº”ç”¨å±‚ (Application)                     â”‚
â”‚  ç­–ç•¥å¼•æ“  â”‚  è®¢å•ç®¡ç†  â”‚  é£é™©æ§åˆ¶  â”‚  ç›‘æ§å‘Šè­¦           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     æœåŠ¡å±‚ (Service)                        â”‚
â”‚  äº¤æ˜“æœåŠ¡  â”‚  æ•°æ®æœåŠ¡  â”‚  é…ç½®æœåŠ¡  â”‚  é€šçŸ¥æœåŠ¡           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     æ¥å…¥å±‚ (Gateway)                        â”‚
â”‚  Binance   â”‚    OKX     â”‚   Gate     â”‚  WebSocket          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     å­˜å‚¨å±‚ (Storage)                        â”‚
â”‚ PostgreSQL â”‚   Redis    â”‚  æ–‡ä»¶å­˜å‚¨  â”‚  æ—¥å¿—å­˜å‚¨           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ æ ¸å¿ƒç»„ä»¶

### 1. ç­–ç•¥å¼•æ“ (Strategy Engine)
**èŒè´£**: äº¤æ˜“ç­–ç•¥æ‰§è¡Œå’Œä¿¡å·ç”Ÿæˆ

**æ ¸å¿ƒç±»**:
```rust
pub struct MarketMakingStrategy {
    config: StrategyConfig,
    position: Position,
    orders: OrderManager,
}

impl Strategy for MarketMakingStrategy {
    async fn on_market_data(&mut self, data: MarketData) -> Vec<Order>;
    async fn on_order_update(&mut self, update: OrderUpdate);
}
```

**å…³é”®ç‰¹æ€§**:
- åŒè¾¹æŠ¥ä»·ç®—æ³•
- åº“å­˜åå·®è°ƒæ•´
- åŠ¨æ€ä»·å·®ç®¡ç†
- é£é™©é™åˆ¶æ£€æŸ¥

### 2. è®¢å•ç®¡ç†ç³»ç»Ÿ (OMS)
**èŒè´£**: è®¢å•ç”Ÿå‘½å‘¨æœŸç®¡ç†å’Œäº¤æ˜“æ‰€é€‚é…

**æ ¸å¿ƒæ¥å£**:
```rust
#[async_trait]
pub trait ExchangeAdapter {
    async fn place_order(&self, order: &Order) -> Result<OrderResponse>;
    async fn cancel_order(&self, id: &str) -> Result<OrderResponse>;
    async fn get_balance(&self) -> Result<Vec<Balance>>;
}
```

**å®ç°ç±»**:
- `BinanceAdapter`: Binance API é€‚é…
- `OkxAdapter`: OKX API é€‚é…  
- `GateAdapter`: Gate API é€‚é…

### 3. é£é™©ç®¡ç†ç³»ç»Ÿ (RMS)
**èŒè´£**: å®æ—¶é£é™©ç›‘æ§å’Œæ§åˆ¶

**é£é™©æ£€æŸ¥**:
```rust
pub struct RiskManager {
    position_limits: PositionLimits,
    order_limits: OrderLimits,
    pnl_limits: PnLLimits,
}

impl RiskManager {
    pub fn check_order(&self, order: &Order) -> RiskResult;
    pub fn check_position(&self, position: &Position) -> RiskResult;
}
```

**æ§åˆ¶æœºåˆ¶**:
- æŒä»“é™åˆ¶
- è®¢å•é¢‘ç‡é™åˆ¶
- æ—¥å†…æŸå¤±é™åˆ¶
- ç´§æ€¥åœæ­¢æœºåˆ¶

### 4. æ•°æ®ç®¡ç†
**èŒè´£**: å¸‚åœºæ•°æ®æ¥æ”¶å’Œå†å²æ•°æ®å­˜å‚¨

**æ•°æ®æµ**:
```
WebSocket â†’ æ•°æ®è§£æ â†’ æ ‡å‡†åŒ– â†’ ç­–ç•¥å¼•æ“
    â†“
å†å²å­˜å‚¨ â† æ‰¹å¤„ç† â† æ•°æ®ç¼“å†²
```

**å­˜å‚¨ç»“æ„**:
- å®æ—¶æ•°æ®: Redis ç¼“å­˜
- å†å²æ•°æ®: PostgreSQL åˆ†åŒºè¡¨
- æ—¥å¿—æ•°æ®: æ–‡ä»¶ç³»ç»Ÿ

## ğŸ“Š æ•°æ®æ¨¡å‹

### æ ¸å¿ƒæ•°æ®ç»“æ„

#### è®¢å• (Order)
```rust
pub struct Order {
    pub id: String,
    pub symbol: Symbol,
    pub side: OrderSide,      // Buy/Sell
    pub order_type: OrderType, // Market/Limit
    pub quantity: Decimal,
    pub price: Option<Decimal>,
    pub status: OrderStatus,
    pub timestamp: DateTime<Utc>,
}
```

#### å¸‚åœºæ•°æ® (MarketData)
```rust
pub struct MarketData {
    pub symbol: Symbol,
    pub bid: Decimal,
    pub ask: Decimal,
    pub last_price: Decimal,
    pub volume: Decimal,
    pub timestamp: DateTime<Utc>,
}
```

#### æŒä»“ (Position)
```rust
pub struct Position {
    pub symbol: Symbol,
    pub quantity: Decimal,
    pub average_price: Decimal,
    pub unrealized_pnl: Decimal,
    pub realized_pnl: Decimal,
}
```

## ğŸ”„ æ•°æ®æµè®¾è®¡

### 1. å¸‚åœºæ•°æ®æµ
```
äº¤æ˜“æ‰€ WebSocket â†’ æ•°æ®è§£æå™¨ â†’ æ ‡å‡†åŒ–å¤„ç† â†’ ç­–ç•¥å¼•æ“
                                      â†“
                              Redis ç¼“å­˜ â†’ PostgreSQL
```

### 2. è®¢å•æ‰§è¡Œæµ
```
ç­–ç•¥ä¿¡å· â†’ é£é™©æ£€æŸ¥ â†’ è®¢å•ç”Ÿæˆ â†’ äº¤æ˜“æ‰€ API â†’ çŠ¶æ€æ›´æ–°
    â†“           â†“          â†“           â†“          â†“
  æ—¥å¿—è®°å½•   é£é™©ç›‘æ§   è®¢å•å­˜å‚¨   æ‰§è¡Œç¡®è®¤   æŒä»“æ›´æ–°
```

### 3. é…ç½®ç®¡ç†æµ
```
é…ç½®æ–‡ä»¶ â†’ é…ç½®è§£æ â†’ å‚æ•°éªŒè¯ â†’ è¿è¡Œæ—¶é…ç½® â†’ åŠ¨æ€æ›´æ–°
    â†“          â†“          â†“          â†“          â†“
  ç‰ˆæœ¬æ§åˆ¶   æ ¼å¼æ£€æŸ¥   èŒƒå›´æ£€æŸ¥   å†…å­˜åŠ è½½   çƒ­æ›´æ–°
```

## âš¡ æ€§èƒ½ä¼˜åŒ–

### 1. å¼‚æ­¥å¤„ç†
- åŸºäº Tokio çš„å¼‚æ­¥è¿è¡Œæ—¶
- éé˜»å¡ I/O æ“ä½œ
- å¹¶å‘ä»»åŠ¡è°ƒåº¦

### 2. å†…å­˜ç®¡ç†
- é›¶æ‹·è´æ•°æ®ä¼ è¾“
- å¯¹è±¡æ± é‡ç”¨
- æ™ºèƒ½æŒ‡é’ˆç®¡ç†

### 3. ç½‘ç»œä¼˜åŒ–
- HTTP/2 è¿æ¥å¤ç”¨
- WebSocket é•¿è¿æ¥
- è¯·æ±‚æ‰¹å¤„ç†

### 4. æ•°æ®åº“ä¼˜åŒ–
- è¿æ¥æ± ç®¡ç†
- æ‰¹é‡å†™å…¥
- ç´¢å¼•ä¼˜åŒ–
- åˆ†åŒºè¡¨è®¾è®¡

## ğŸ”’ å®‰å…¨æ¶æ„

### 1. API å®‰å…¨
```rust
pub struct ApiSigner {
    api_key: String,
    secret_key: String,
}

impl ApiSigner {
    pub fn sign_request(&self, request: &Request) -> String {
        // HMAC-SHA256 ç­¾å
    }
}
```

### 2. æ•°æ®å®‰å…¨
- æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨
- ä¼ è¾“å±‚ TLS åŠ å¯†
- è®¿é—®æƒé™æ§åˆ¶

### 3. ç³»ç»Ÿå®‰å…¨
- è¾“å…¥å‚æ•°éªŒè¯
- SQL æ³¨å…¥é˜²æŠ¤
- å¼‚å¸¸å¤„ç†æœºåˆ¶

## ğŸ“ˆ ç›‘æ§ä½“ç³»

### 1. ç³»ç»Ÿç›‘æ§
- CPU/å†…å­˜ä½¿ç”¨ç‡
- ç½‘ç»œå»¶è¿Ÿå’Œååé‡
- ç£ç›˜ I/O æ€§èƒ½

### 2. ä¸šåŠ¡ç›‘æ§
- è®¢å•æˆåŠŸç‡
- ç­–ç•¥æ”¶ç›Šç‡
- é£é™©æŒ‡æ ‡

### 3. å‘Šè­¦æœºåˆ¶
- é˜ˆå€¼å‘Šè­¦
- å¼‚å¸¸æ£€æµ‹
- è‡ªåŠ¨æ¢å¤

## ğŸš€ éƒ¨ç½²æ¶æ„

### 1. å•æœºéƒ¨ç½²
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            æœåŠ¡å™¨                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ HFT App â”‚  â”‚Database â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. åˆ†å¸ƒå¼éƒ¨ç½²
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç­–ç•¥èŠ‚ç‚¹    â”‚  â”‚  æ•°æ®èŠ‚ç‚¹    â”‚  â”‚  å­˜å‚¨èŠ‚ç‚¹    â”‚
â”‚ Strategy    â”‚  â”‚   Data      â”‚  â”‚  Storage    â”‚
â”‚  Service    â”‚  â”‚  Service    â”‚  â”‚  Service    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚               â”‚               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              è´Ÿè½½å‡è¡¡å™¨                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ é…ç½®ç®¡ç†

### é…ç½®å±‚çº§
1. **é»˜è®¤é…ç½®**: ç³»ç»Ÿå†…ç½®é»˜è®¤å€¼
2. **æ–‡ä»¶é…ç½®**: config.toml é…ç½®æ–‡ä»¶
3. **ç¯å¢ƒå˜é‡**: è¿è¡Œæ—¶ç¯å¢ƒé…ç½®
4. **åŠ¨æ€é…ç½®**: è¿è¡Œæ—¶åŠ¨æ€è°ƒæ•´

### é…ç½®ç¤ºä¾‹
```toml
[system]
log_level = "info"
worker_threads = 4

[database]
url = "postgresql://localhost/hft"
pool_size = 10

[strategy]
enabled = true
risk_limit = 1000.0
```

---

**æ¶æ„ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-01-01

